{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/js/pixabay-api.js","../src/main.js"],"sourcesContent":["import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst loader = document.querySelector('.loader');\n\nexport function showLoader() {\n  loader.classList.add('active');\n}\n\nexport function hideLoader() {\n  loader.classList.remove('active');\n}\n\n export function createGalleryMarkup(images) {\n  const galleryMarkup = images.map(image => `\n    <div class=\"gallery-item\">\n      <a href=\"${image.largeImageURL}\" class=\"lightbox\">\n        <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" />\n      </a>\n      <div class=\"info\">\n        <p>\n        <b>Likes</b>\n         ${image.likes}\n        </p>\n        <p>\n        <b>Views</b>\n       ${image.views}\n        </p>\n        <p>\n        <b>Comments</b>\n        ${image.comments}\n        </p>\n        <p>\n        <b>Downloads</b>\n        ${image.downloads}\n        </p>\n      </div>\n    </div>\n  `).join('');\n\n  const gallery = document.querySelector('.gallery');\n  gallery.innerHTML = galleryMarkup;\n\n  // Initialize SimpleLightbox only once (assuming a single instance is needed)\n  const lightbox = new SimpleLightbox('.lightbox');\n\n  return galleryMarkup;\n}\n\nexport function showMessage(message) {\n  iziToast.error({\n    title: \"Error\",\n    message: message,\n    position: 'topRight',\n  });\n}\n\nexport function toggleLoadMoreButton(imagesCount) {\n  const loadMoreButton = document.querySelector('.load-more-button');\n  if (imagesCount > 0) {\n    loadMoreButton.style.display = \"block\";\n  } else {\n    loadMoreButton.style.display = \"none\";\n    showMessage(\"We're sorry, but you've reached the end of search results.\");\n  }\n}\n\nexport function scrollToNextImages() {\n  const galleryItem = document.querySelector('.gallery-item');\n  if (galleryItem) {\n    const itemHeight = galleryItem.getBoundingClientRect().height;\n    window.scrollBy({ top: 2 * itemHeight, behavior: 'smooth' });\n  }\n}","import axios from \"axios\";\n\n// Функція для отримання зображень з Pixabay\n\nexport async function getImages(keyword, page = 1, perPage = 15) {\n  const API_KEY = \"43314388-88f7122255793401969da564c\";\n  const URL = `https://pixabay.com/api/?key=${API_KEY}&q=${keyword}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n  try {\n    const response = await axios.get(URL);\n    const images = response.data.hits;\n    return images;\n  } catch (error) {\n    console.error(\"Error fetching images:\", error);\n    return []; \n  }\n}\n","// Imports\nimport { showLoader, hideLoader, createGalleryMarkup, showMessage, toggleLoadMoreButton, scrollToNextImages } from \"./js/render-functions.js\";\nimport { getImages } from \"./js/pixabay-api.js\";\nimport iziToast from \"izitoast\";\n\n// Main\n\nconst searchForm = document.querySelector('.search-form');\nconst searchInput = document.querySelector('.search-input');\nconst loadMoreButton = document.querySelector('.load-more-button');\n\nloadMoreButton.style.display = \"none\";\nlet currentKeyword = \"\";\n\nsearchForm.addEventListener('submit', async (event) => {\n  event.preventDefault();\n\n  const keyword = searchInput.value.trim();\n\n  if (keyword === \"\") {\n    showMessage(\"Start typing in\")\n    return\n  }\n\n  currentKeyword = keyword;\n  let page = 1;\n  \n  // Loader and clear \n\n  showLoader();\n  document.querySelector('.gallery').innerHTML = '';\n   \n  // Reset for new search\n  \n  try {\n    const images = await getImages(currentKeyword, page);\n   \n    if (images.length === 0) {\n      loadMoreButton.style.display = \"none\";\n      showMessage(\"Sorry, there are no images matching your search query. Please try again!\");\n      return;\n    }\n\n    // Create gallery markup and hide/show button\n    createGalleryMarkup(images);\n    toggleLoadMoreButton(images.length);\n\n    // Hide loader\n    hideLoader();\n  } catch (error) {\n    console.error('Error fetching images:', error);\n  }\n\n// Add an event and more pictures\n\npage = page + 1; \n  \nloadMoreButton.addEventListener('click', async () => {\n  try {\n    const images = await getImages(currentKeyword, page);\n\n    const gallery = document.querySelector('.gallery');\n    const galleryMarkup = createGalleryMarkup(images);\n    gallery.innerHTML += galleryMarkup;\n\n    toggleLoadMoreButton(images.length);\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n  }\n});\n\n  // End of collection\n\nconst PER_PAGE = 15; \n\nloadMoreButton.addEventListener('click', async () => {\n  page++;\n  \n  try {\n    const images = await getImages(currentKeyword, page);\n\n    const gallery = document.querySelector('.gallery');\n    const galleryMarkup = createGalleryMarkup(images);\n    gallery.innerHTML += galleryMarkup;\n\n    const totalHits = images.totalHits; \n    toggleLoadMoreButton(images.length, totalHits > page * PER_PAGE);\n\n    if (page * PER_PAGE >= totalHits) {\n      showMessage(\"We are sorry, but you have reached the end of search results.\");\n      loadMoreButton.style.display = 'none';\n    } else {scrollToNextImages();}\n\n  } catch (error) {\n    console.error('Error fetching more images:', error);\n  }\n});\n  \n});\n\n\n"],"names":["loader","showLoader","hideLoader","createGalleryMarkup","images","galleryMarkup","image","gallery","SimpleLightbox","showMessage","message","iziToast","toggleLoadMoreButton","imagesCount","loadMoreButton","scrollToNextImages","galleryItem","itemHeight","getImages","keyword","page","perPage","URL","axios","error","searchForm","searchInput","currentKeyword","event","PER_PAGE","totalHits"],"mappings":"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"}